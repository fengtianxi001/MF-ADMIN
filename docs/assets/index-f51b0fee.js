import{d as N,bX as E,c as S,r as z,o as t,j as c,s as n,h as r,u as o,a as u,z as p,l as T,M as $,q as g,N as F,F as O,t as R,p as q}from"./index-b15cb7d1.js";import{u as J}from"./index-28ec1896.js";import{u as P,U as M}from"./index-56d760ae.js";import{c as X,_ as A,s as G,g as H}from"./index.vue_vue_type_script_setup_true_lang-d617ef71.js";import{B as x}from"./index-0360edc7.js";const K={key:1},Q={key:1},W={key:1},Y={key:1},Z={key:1},w={key:1},I=N({__name:"EditTable2",setup(C){const{boolean:s,setFalse:m,setTrue:l}=E(!1),{loading:_,openLoading:y,closeLoading:V}=J(),k=S(()=>{const b=[{type:"primary",text:"保存",size:"small",loading:_.value,disabled:JSON.stringify(v.value)===JSON.stringify(e.value),onClick:U.onSave},{type:"primary",text:"取消",size:"small",onClick:U.onCancel}],D=[{type:"primary",text:"编辑",size:"small",onClick:U.onEdit}];return s.value?b:D}),h=[{title:"责任人类型",dataIndex:"type"},{title:"责任人姓名",width:200,slotName:"principalName"},{title:"责任人电话",width:200,slotName:"contact"},{title:"责任人邮件",slotName:"email"},{title:"责任人工作单位",slotName:"department"},{title:"责任人通讯地址",slotName:"address"}],e=z([]),{data:v,loading:L,run:j}=P(X,{defaultData:[],formatResult:b=>b.data}),U={onEdit:()=>{e.value=T.cloneDeep([...v.value]),l()},onCancel:m,onSave:async()=>{y(),await G(e.value),V(),$.success("保存成功"),m(),j()}};return(b,D)=>{const f=g("a-input"),B=g("a-table");return t(),c(x,{title:"工程安全主要责任人",loading:o(L)},{extra:n(()=>[r(A,{data:o(k)},null,8,["data"])]),default:n(()=>[r(B,{columns:h,data:o(v),pagination:!1,bordered:!1},{principalName:n(({record:d,rowIndex:a})=>[o(s)?(t(),c(M,{key:0,modelValue:e.value[a].principalId,"onUpdate:modelValue":i=>e.value[a].principalId=i},null,8,["modelValue","onUpdate:modelValue"])):(t(),u("span",K,p(d.principalName),1))]),department:n(({record:d,rowIndex:a})=>[o(s)?(t(),c(f,{key:0,modelValue:e.value[a].department,"onUpdate:modelValue":i=>e.value[a].department=i},null,8,["modelValue","onUpdate:modelValue"])):(t(),u("span",Q,p(d.department),1))]),contact:n(({record:d,rowIndex:a})=>[o(s)?(t(),c(f,{key:0,modelValue:e.value[a].contact,"onUpdate:modelValue":i=>e.value[a].contact=i},null,8,["modelValue","onUpdate:modelValue"])):(t(),u("span",W,p(d.department),1))]),phone:n(({record:d,rowIndex:a})=>[o(s)?(t(),c(f,{key:0,modelValue:e.value[a].phone,"onUpdate:modelValue":i=>e.value[a].phone=i},null,8,["modelValue","onUpdate:modelValue"])):(t(),u("span",Y,p(d.phone),1))]),email:n(({record:d,rowIndex:a})=>[o(s)?(t(),c(f,{key:0,modelValue:e.value[a].email,"onUpdate:modelValue":i=>e.value[a].email=i},null,8,["modelValue","onUpdate:modelValue"])):(t(),u("span",Z,p(d.email),1))]),address:n(({record:d,rowIndex:a})=>[o(s)?(t(),c(f,{key:0,modelValue:e.value[a].address,"onUpdate:modelValue":i=>e.value[a].address=i},null,8,["modelValue","onUpdate:modelValue"])):(t(),u("span",w,p(d.address),1))]),_:1},8,["data"])]),_:1},8,["loading"])}}}),ee=N({__name:"ProjectDetail",setup(C){const{data:s,loading:m}=P(H,{defaultParams:[1],defaultData:{},formatResult:l=>{var _;return[{label:"工程名字",value:l.name},{label:"工程负责人",value:(_=l.principal)==null?void 0:_.name},{label:"工程编码",value:l.code},{label:"工程类型",value:l.type},{label:"管理单位",value:l.department},{label:"工程地址",value:l.address},{label:"所属机构",value:l.organization},{label:"工程状态",value:l.status===1?"正常":"停用"},{label:"建档时间",value:l.createTime}]}});return(l,_)=>{const y=g("a-tag"),V=g("a-descriptions-item"),k=g("a-descriptions"),h=x;return t(),c(h,{title:"工程基本信息",loading:o(m)},{default:n(()=>[r(k,{class:"project-info",size:"mini",data:o(s),column:5},{default:n(()=>[(t(!0),u(O,null,F(o(s),(e,v)=>(t(),c(V,{key:v,label:e.label},{default:n(()=>[r(y,null,{default:n(()=>[R(p(e.value),1)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1},8,["data"])]),_:1},8,["loading"])}}});const ae=q(ee,[["__scopeId","data-v-2c2eb275"]]),te={class:"page-container"},ie=N({__name:"index",setup(C){return(s,m)=>(t(),u("div",te,[r(ae),r(I)]))}});export{ie as default};
