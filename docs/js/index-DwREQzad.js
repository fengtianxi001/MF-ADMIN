import{d as v,z as _,D as R,a1 as x,o as M,c as w,i,f as n,j as a,K as h,L as k,q as g,ab as B,aa as e,b as D,ae as I,af as C}from"./vendor-RGK81Rd9.js";import"./index-awFttPXd.js";import{_ as Y,a as $,u as T,A as E,d as V,B as z}from"./secretHierarchyEnum-jbaofLgQ.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_lang-n1xqOAjb.js";import{a as S}from"./useModalForm-psK_Mvxo.js";const F=v({__name:"editor",props:{mode:{},record:{}},setup(b){const l=b,s=_(),{form:c,dataSource:p,loading:f,validate:m}=S(),y=[{label:"申请原因",name:"result"},{label:"申请内容",name:"content"},{label:"申请时间",name:"time"},{label:"申请人",name:"appliance"},{label:"审核人",name:"moderator"},{label:"审核时间",name:"time"},{label:"审核意见",name:"approval"}],t=_([]),r=[{title:"序号",dataIndex:"code",align:"center",width:80,render:({rowIndex:d})=>d+1},{title:"待更换设备编号",dataIndex:"code",align:"center"},{title:"待更换设备名称",dataIndex:"name",align:"center"},{title:"待更换设备型号",dataIndex:"model",align:"center"}],u=async()=>{await m()||s.value.hide()},o=async()=>{await m()||s.value.hide()};return R(()=>{x(()=>{l.mode==="edit"&&(p.value={...l.record},t.value=l.record.devices?[...l.record.devices]:[])})}),(d,q)=>(M(),w(a(Y),{ref_key:"modal",ref:s,width:"1000px",loading:a(f),footer:!1},{footer:i(()=>[n(a(h),null,{default:i(()=>[n(a(k),{onClick:o},{default:i(()=>[g("驳回")]),_:1}),n(a(k),{type:"primary",onClick:u},{default:i(()=>[g("同意")]),_:1})]),_:1})]),default:i(()=>[n(a(A),{size:"small",column:3,configs:y,modelValue:d.record,bordered:""},null,8,["modelValue"]),n(a(B),{style:{"margin-top":"15px"},size:"small",columns:r,data:t.value,bordered:{cell:!0},pagination:!1,scroll:{y:300}},null,8,["data"])]),_:1},8,["loading"]))}}),P={class:"page"},U=v({__name:"index",setup(b){const l=$(Array.from({length:20},(t,r)=>({id:e.Random.id(),result:e.Random.title(),content:e.Random.title(),appliance:e.Random.cname(),time:e.Random.date("yyyy-MM-dd"),moderator:e.Random.cname(),status:e.Random.pick([0,1,2,3,4,5,6]),devices:Array.from({length:20},(u,o)=>({id:e.Random.id(),code:`DEV-${o+1}`,name:`设备名称 ${o+1}`,model:`型号 ${o+1}`,brand:`品牌 ${o+1}`,category:e.Random.pick([0,1,2,3,4,5,6]),security:e.Random.pick([0,1,2,3]),manufacturer:`厂商 ${o+1}`,quantity:e.Random.natural(1,100),unit:e.Random.pick(["个","台"]),registeredBy:e.Random.cname(),registerDate:e.Random.date("yyyy-MM-dd"),purchaseDate:e.Random.date("yyyy-MM-dd")}))}))),{table:s,selected:c,refresh:p}=T(),f=[{label:"更换原因",name:"result",component:"Input"},{label:"更换内容",name:"content",component:"Input"},{label:"状态",name:"status",component:"Select",props:{options:[...E]}},{label:"起止时间",name:"range",component:"RangePicker",props:{placeholder:["起始时间","结束时间"],format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"}}],m=[{title:"申请原因",dataIndex:"result",align:"left",ellipsis:!0,tooltip:!0},{title:"申请内容",dataIndex:"content",align:"left",ellipsis:!0,tooltip:!0},{title:"申请类型",dataIndex:"type",align:"center",width:160},{title:"申请人",dataIndex:"appliance",align:"center",width:120},{title:"申请时间",dataIndex:"time",align:"center",width:160},{title:"操作",align:"center",width:100,render:({record:t})=>n(h,{size:10},{default:()=>[n(C,{onClick:()=>y.onDetail(t)},{default:()=>[g("详情")]})]})}],y={onDetail:async t=>{await V(F,{mode:"edit",title:"详情",record:t})&&p()}};return(t,r)=>(M(),D("div",P,[n(a(z),{selected:a(c),"onUpdate:selected":r[0]||(r[0]=u=>I(c)?c.value=u:null),ref_key:"table",ref:s,title:"已审批列表","row-key":"result",selection:"checkbox",service:a(l),"table-filter":f,"table-columns":m},null,8,["selected","service"])]))}});export{U as default};
